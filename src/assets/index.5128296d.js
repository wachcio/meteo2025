var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(s,t,n)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,i=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&o(e,t,s[t]);if(n)for(var t of n(s))a.call(s,t)&&o(e,t,s[t]);return e},u=(e,n)=>s(e,t(n));import{m as d,a as c,b as l,p,c as m,o as h,d as y,e as w,w as v,f as g,r as z,T as f,g as k,h as C,i as b,t as I,j,k as S,K as x,l as N,D,n as O,q as $,v as M,F as _,s as A,u as P,x as T,y as L,z as V,L as J,Z as B,A as R,B as G,C as H,E as K,_ as W,G as U}from"./vendor.a7c93dd3.js";const F={name:"Nav",props:{},computed:i({},d(["sensorsCurrent","isLoaded","showInfo"])),methods:u(i(i({},c(["updateSensorsCurrent"])),l(["getCurrentJSON"])),{getClassRefreshButton(){if("/current"!=this.$route.path)return"disable"},isCurrentPath(){return"/current"===this.$route.path&&this.getCurrentJSON()}})},Q=v();p("data-v-5e5d8306");const Y={class:"container"},E=g(" Odczyty aktualne "),Z=g(" Odczyty archiwalne "),q=g(" O projekcie ");m();const X=Q(((e,s,t,n,r,a)=>{const o=z("router-link");return h(),y("nav",null,[w("div",Y,[w("div",{class:["item refresh",a.getClassRefreshButton()],onClick:s[1]||(s[1]=e=>a.isCurrentPath())}," Odśwież dane ",2),w(o,{to:"/current",tag:"div",class:"item current","active-class":"active",exact:""},{default:Q((()=>[E])),_:1}),w(o,{to:"/archive",tag:"div",class:"item archive","active-class":"active"},{default:Q((()=>[Z])),_:1}),w(o,{to:"about",tag:"div",class:"item about","active-class":"active"},{default:Q((()=>[q])),_:1})])])}));F.render=X,F.__scopeId="data-v-5e5d8306";const ee={name:"Sensor",components:{},props:{},data:()=>({}),computed:i({},d(["sensorsCurrent","isLoaded","showInfo","sensorActive"])),watch:{},methods:{}},se=v();p("data-v-6e2f87bd");const te={id:"preloader"},ne=w("img",{src:"http://meteo.wachcio.pl/assets/preloader.png"},null,-1);m();const re=se(((e,s,t,n,r,a)=>(h(),y("div",te,[ne]))));ee.render=re,ee.__scopeId="data-v-6e2f87bd";const ae={name:"AnimateCSS",props:["appear","enter","leave"],data:()=>({})},oe=v(),ie=oe(((e,s,t,n,r,a)=>(h(),y(f,{mode:"out-in",appear:t.appear,"enter-active-class":"animated "+t.enter,"leave-active-class":"animated "+t.leave},{default:oe((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["appear","enter-active-class","leave-active-class"]))));ae.render=ie,ae.__scopeId="data-v-443c62a2";const ue={name:"App",components:{Nav:F,Preloader:ee,AnimateCSS:ae},props:{endpointCurrent:String},data:()=>({}),computed:u(i({},d(["sensorsCurrent","isLoaded","showInfo"])),{getCurrentYear:()=>(new Date).getFullYear()}),getters:i({},C(["winDirectionIndex"])),watch:{},created(){window.addEventListener("scroll",this.handleScroll),this.refreshData()},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:u(i(i({},c(["updateSensorsCurrent"])),l(["getCurrentJSON"])),{handleScroll(){this.showInfo&&this.$store.commit("showInfo",!1)},refreshData(){this.$store.dispatch("getCurrentJSON"),setTimeout(this.refreshData,6e4)},checkWindSpeed0(){for(const e of this.sensorsCurrent)if("Prędkość wiatru km/h"===e.sensorName&&0===e.valueCurrent.value)for(const s of this.sensorsCurrent)"Kierunek wiatru"===s.sensorName&&(e.valueCurrent.value="bezwietrznie",e.picture="assets/strzalka_przezroczysta.png")}})},de={id:"main"},ce=w("section",{id:"pageTitle"},"Stacja meteo Rypin",-1),le=w("hr",null,null,-1);ue.render=function(e,s,t,n,r,a){const o=z("Nav"),i=z("router-view"),u=z("AnimateCSS"),d=z("Preloader");return h(),y("div",de,[ce,w("div",null,[w(o),w(u,{enter:"lightSpeedIn",leave:"lightSpeedOut",appear:"appear"},{default:b((()=>[w(i,null,{default:b((({Component:e})=>[(h(),y(x,null,[(h(),y(N(e)))],1024))])),_:1})])),_:1})]),w("footer",null,[le,w("div",null,"Wachcio © 2018-"+I(a.getCurrentYear),1)]),(h(),y(j,{to:"#endOfBody"},[e.isLoaded||e.sensorsCurrent.length?S("",!0):(h(),y(d,{key:0}))]))])};const pe={name:"SensorTitle",props:{sensorCurrent:Object},data:()=>({}),methods:{}},me=v();p("data-v-6d3b2532");const he={class:"title"};m();const ye=me(((e,s,t,n,r,a)=>(h(),y("div",he,I(t.sensorCurrent.sensorName),1))));pe.render=ye,pe.__scopeId="data-v-6d3b2532";const we={name:"SensorIcon",props:{sensorCurrent:Object},methods:{windIconCorrection(e){let s="";return s="Kierunek wiatru"===e.sensorName?`http://meteo.wachcio.pl/${e.picture}`:`./assets/${e.picture}`,s}}},ve=v()(((e,s,t,n,r,a)=>(h(),y("div",{class:["icon","Kierunek wiatru"==t.sensorCurrent.sensorName?"windDirection":null]},[w("img",{src:a.windIconCorrection(t.sensorCurrent)},null,8,["src"])],2))));we.render=ve,we.__scopeId="data-v-6793e394";const ge={name:"SensorValues",props:{sensorCurrent:Object},computed:{checkAlarms(){return this.sensorCurrent.alarmMax?"alarmMax":this.sensorCurrent.alarmMin?"alarmMin":""}},methods:{sensorValue(e,s){let t="";if("Opady"!==e.sensorName)switch(s){case 1:return`${e.valueCurrent.value} ${e.unit}`;case 2:return`${e.valueMax.value} ${e.unit}`;case 3:return`${e.valueMin.value} ${e.unit}`}else switch(s){case 1:t=`${e.valueCurrent.value} mm/min`;break;case 2:t=`${e.valueMax.value} mm/h`;break;case 3:t=`${e.valueMin.value} mm/d`}return t}}},ze=v();p("data-v-7a2a9d88");const fe={class:"value"},ke={class:"value"};m();const Ce=ze(((e,s,t,n,r,a)=>(h(),y("div",null,[w("div",{class:["value","Kierunek wiatru"==t.sensorCurrent.sensorName?"center":null]},["Kierunek wiatru"!==t.sensorCurrent.sensorName?(h(),y("img",{key:0,src:"./assets/strzalka_przezroczysta.png"},null,8,["src"])):S("",!0),w("div",{class:a.checkAlarms},I(a.sensorValue(t.sensorCurrent,1)),3)],2),w("div",fe,["Kierunek wiatru"!==t.sensorCurrent.sensorName?(h(),y("img",{key:0,src:"./assets/strzalka_czerwona.png"},null,8,["src"])):S("",!0),g(" "+I(a.sensorValue(t.sensorCurrent,2)),1)]),w("div",ke,["Kierunek wiatru"!==t.sensorCurrent.sensorName?(h(),y("img",{key:0,src:"./assets/strzalka_niebieska.png"},null,8,["src"])):S("",!0),g(" "+I(a.sensorValue(t.sensorCurrent,3)),1)])]))));ge.render=Ce,ge.__scopeId="data-v-7a2a9d88";const be={name:"Sensor",components:{SensorTitle:pe,SensorIcon:we,SensorValues:ge},props:{sensorCurrent:Object},data:()=>({upToDate:!0,sensorHint:""}),computed:i({},d(["sensorsCurrent","isLoaded","showInfo","sensorActive"])),watch:{currentDate(){this.tooltip()}},mounted(){this.tooltip()},methods:u(i(i({},c(["updateSensorsCurrent"])),l(["getCurrentJSON"])),{clickSensor(){this.$store.commit("sensorActive",this.sensorCurrent),this.$store.commit("showInfo",!0)},diffDate(e){const s=D.fromSQL(e),t=D.local().diff(s,["days","hours","minutes","seconds"]).toObject();let n="";return t.days&&(n+=`${t.days} dni, `),t.hours&&(n+=`${t.hours} godzin/y, `),t.minutes&&(n+=`${t.minutes} minut/y, `),t.seconds&&(n+=`${Math.floor(t.seconds)} sekund`),n},checkDate(){const e=new Date(this.sensorCurrent.valueCurrent.date),s=Math.floor((new Date-e)/6e4);let t=4;return"Czujnik pyłu na ul. Warszawskiej"!==this.sensorCurrent.sensorCategoryTitle&&"Czujnik pyłu na ul. Cholewińskiego"!==this.sensorCurrent.sensorCategoryTitle||(t=17),s>t?{error:!0}:{}},tooltip(e){return`Ostatni odczyt ${this.sensorCurrent.valueCurrent.value}${this.sensorCurrent.unit} (${this.diffDate(this.sensorCurrent.valueCurrent.date,e)} temu)`}})},Ie=v()(((e,s,t,n,r,a)=>{const o=z("SensorTitle"),i=z("SensorIcon"),u=z("SensorValues");return h(),y("div",null,[w("div",{class:"sensor",onClick:s[1]||(s[1]=O(((...e)=>a.clickSensor&&a.clickSensor(...e)),["prevent"]))},[w(o,{"sensor-current":t.sensorCurrent},null,8,["sensor-current"]),w(i,{class:a.checkDate(),"sensor-current":t.sensorCurrent},null,8,["class","sensor-current"]),w(u,{"sensor-current":t.sensorCurrent},null,8,["sensor-current"])])])}));be.render=Ie,be.__scopeId="data-v-53b7f822";const je={name:"InfoBox",props:{},data:()=>({}),computed:{sensorData(){return this.$store.state.sensorActive}},created(){D.local()},methods:{clickInfo(){this.$store.commit("showInfo",!1)},checkDate(e,s){const t=new Date,n=new Date(e);return s<Math.floor((t-n)/6e4)?"error":null},diffDate(e){const s=D.fromSQL(e),t=D.local().diff(s,["days","hours","minutes","seconds"]).toObject();let n="";return t.days&&(n+=`${t.days} dni, `),t.hours&&(n+=`${t.hours} godzin/y, `),t.minutes&&(n+=`${t.minutes} minut/y, `),t.seconds&&(n+=`${Math.floor(t.seconds)} sekund`),n},info(e,s){let t="";return"current"===s&&(t=`Aktualny odczyt: ${e.valueCurrent.value} ${e.unit} (${e.valueCurrent.date} czyli ${this.diffDate(e.valueCurrent.date)} temu)`),"max"===s&&(t=`Najwyższy odczyt z ostatniej doby: ${e.valueMax.value} ${e.unit} (${e.valueMax.date} czyli ${this.diffDate(e.valueMax.date)} temu)`),"min"===s&&(t=`Najniższy odczyt z ostatniej doby: ${e.valueMin.value} ${e.unit} (${e.valueMin.date} czyli ${this.diffDate(e.valueMin.date)} temu)`),"Kierunek wiatru"!==e.sensorName&&"Opady"!==e.sensorName||(t=`Od ostatniego odczytu minęło: ${this.diffDate(e.valueCurrent.date)}`),("Kierunek wiatru"===e.sensorName&&"max"===s||"Opady"===e.sensorName&&"max"===s)&&(t=""),("Kierunek wiatru"===e.sensorName&&"min"===s||"Opady"===e.sensorName&&"min"===s)&&(t=""),t}}},Se=v()(((e,s,t,n,r,a)=>(h(),y(j,{to:"#endOfBody"},[w("div",{class:"bacground",onClick:s[2]||(s[2]=(...e)=>a.clickInfo&&a.clickInfo(...e))},[w("div",{class:"info",onClick:s[1]||(s[1]=(...e)=>a.clickInfo&&a.clickInfo(...e))},[w("h1",null,I(a.sensorData.sensorName),1),w("p",null,I(a.info(a.sensorData,"current")),1),w("p",null,I(a.info(a.sensorData,"max")),1),w("p",null,I(a.info(a.sensorData,"min")),1)])])]))));je.render=Se,je.__scopeId="data-v-428dd819";const xe={name:"AirQualityWidget",props:{sensorName:String},data:()=>({}),components:{},watch:{}},Ne=v();p("data-v-1717e60c");const De={class:"widgets"},Oe={key:1,id:"airly_874508336",src:"https://airly.org/map/widget.html#w=280&h=380&m=true&i=true&d=false&ah=true&aw=false&l=pl&it=AIRLY_CAQI&us=metric&ut=celsius&lat=53.068923&lng=19.422556&id=18800"};m();const $e=Ne(((e,s,t,n,r,a)=>(h(),y("div",De,["warszawska"==t.sensorName?(h(),y("iframe",{key:0,id:"airly_428486066",src:"https://airly.eu/map/widget.html#w=280&h=380&m=true&i=true&d=false&ah=true&aw=false&l=pl&it=AIRLY_CAQI&us=metric&ut=celsius&lat=53.062772&lng=19.411941&id=43200"},null,8,["src"])):S("",!0),"cholewinskiego"==t.sensorName?(h(),y("iframe",Oe)):S("",!0)]))));xe.render=$e,xe.__scopeId="data-v-1717e60c";const Me={name:"SensorCategory",components:{Sensor:be,InfoBox:je,AirQualityWidget:xe,AnimateCSS:ae},props:{},data:()=>({newCategoryIndex:[],currentDate:void 0,categoryVisible:[],sensorData:void 0,nrOfCategory:0}),computed:i({},d(["sensorsCurrent","isLoaded","showInfo","sensorActive"])),watch:{sensorsCurrent(){if(this.findCategoryFirstIndex(),this.nrOfCategory=this.newCategoryIndex.length,0===this.categoryVisible.length)for(let e=0;e<this.nrOfCategory;e++)this.categoryVisible.push(!0)}},methods:u(i(i({},c(["updateSensorsCurrent"])),l(["getCurrentJSON"])),{sensorsToCategory(e){return this.sensorsCurrent.filter((function(s){return s.sensorCategoryNr===e}))},sensorActiveData(e){this.sensorData=e},h1Title:e=>void 0!==e?e.sensorCategoryTitle:null,categoryClick(e){this.categoryVisible.splice(e,1,!this.categoryVisible[e])},findCategoryFirstIndex(){this.newCategoryIndex=this.sensorsCurrent.map((function(e,s,t){return 0===s?0:e.sensorCategoryTitle!==t[s-1].sensorCategoryTitle?s:void 0})),this.newCategoryIndex=this.newCategoryIndex.filter((function(e){return void 0!==e}))}}),beforeMount(){this.getCurrentJSON()}},_e=v();p("data-v-25b17d1e");const Ae={class:"readings"},Pe={class:"wrapper"},Te={key:0,class:"hrWrapper"},Le=w("hr",{class:"hr1"},null,-1),Ve=w("hr",{class:"hr2"},null,-1),Je=w("hr",null,null,-1),Be={class:"sensorWrapper"};m();const Re=_e(((e,s,t,n,r,a)=>{const o=z("Sensor"),i=z("AirQualityWidget"),u=z("AnimateCSS"),d=z("InfoBox");return $((h(),y("div",Ae,[w("div",Pe,[(h(!0),y(_,null,A(r.nrOfCategory,(s=>(h(),y("div",{key:s,class:"sensorTitle"},[s>1?(h(),y("div",Te,[Le,Ve,Je])):S("",!0),w("h1",{class:"categoryTitle",onClick:e=>a.categoryClick(s-1)},I(a.h1Title(e.sensorsCurrent[r.newCategoryIndex[s-1]])),9,["onClick"]),w(u,{enter:"lightSpeedIn",leave:"lightSpeedOut",appear:"appear"},{default:_e((()=>[$(w("div",Be,[(h(!0),y(_,null,A(a.sensorsToCategory(s),((e,s)=>(h(),y("div",{key:s},[w(o,{"sensor-current":e},null,8,["sensor-current"])])))),128)),s==r.nrOfCategory-1?(h(),y(i,{key:0,sensorName:"warszawska"})):S("",!0),s==r.nrOfCategory?(h(),y(i,{key:1,sensorName:"cholewinskiego"})):S("",!0)],512),[[M,r.categoryVisible[s-1]]])])),_:2},1024)])))),128))]),w(f,{name:"fade"},{default:_e((()=>[e.showInfo?(h(),y(d,{key:0})):S("",!0)])),_:1})],512)),[[M,e.isLoaded||e.sensorsCurrent.length]])}));Me.render=Re,Me.__scopeId="data-v-25b17d1e";const Ge={name:"ArchivesForm",components:{},props:{sensorsNames:Array},data:()=>({url:"",sensorIndex:0,year:2018,useMonth:!0,month:1,useDay:!0,day:1,useHour:!0,hour:1,isResponse:!1,responseMax:[],responseMin:[],responseAvg:[],responseSum:[],responsePeriod:"",JSONerror:!1,windDirectionIndex:-1,rainIndex:-1}),computed:{},watch:{useMonth(e){!1===e&&(this.useDay=!1,this.useHour=!1)},useDay(e){!1===e&&(this.useHour=!1)}},created(){const e=new Date;this.year=e.getFullYear(),this.month=e.getMonth()+1,this.day=e.getDate(),this.hour=e.getHours(),this.rainIndex=this.sensorsNames.findIndex((function(e){return"Opady"===e})),this.windDirectionIndex=this.sensorsNames.findIndex((function(e){return"Kierunek wiatru"===e}))},methods:{formSend(){this.rainIndex=this.sensorsNames.findIndex((function(e){return"Opady"===e})),this.windDirectionIndex=this.sensorsNames.findIndex((function(e){return"Kierunek wiatru"===e})),this.isResponse=!1,this.JSONerror=!1;if(new Date-new Date(this.year,this.month-1,this.day,this.hour)<0)return this.JSONerror=!0,null;let e=`http://meteo.wachcio.pl/API/GetJSON.php?year=${this.year}&sensor=${this.sensorIndex}`;this.responsePeriod=this.year,this.useMonth&&(e+=`&month=${this.month}`,this.responsePeriod+=`-${this.month}`),this.useDay&&(e+=`&day=${this.day}`,this.responsePeriod+=`-${this.day}`),this.useHour&&(e+=`&hour=${this.hour}`,this.responsePeriod+=` godzina ${this.hour}`),this.url=e,this.getJSON()},getJSON(){this.isResponse=!1,this.sensorIndex===this.rainIndex&&P.get(`${this.url}&operation=sum`).then((e=>this.responseSum=e.data)),P.get(`${this.url}&operation=max`).then((e=>this.responseMax=e.data)),P.get(`${this.url}&operation=min`).then((e=>this.responseMin=e.data)),P.get(`${this.url}&operation=avg`).then((e=>this.responseAvg=e.data)).then(this.isResponse=!0)},selectedClick(){this.rainIndex=this.sensorsNames.findIndex((function(e){return"Opady"===e})),this.windDirectionIndex=this.sensorsNames.findIndex((function(e){return"Kierunek wiatru"===e}))}}},He=v();p("data-v-71851c00");const Ke={class:"wrapper"},We={class:"archiveFormContainer"},Ue=w("label",{for:"archiveForm"},"Wybierz datę lub okres dla którego zostaną wyświetlone statystyki",-1),Fe={id:"archiveForm"},Qe=w("label",{for:"sensor"},"Czujnik",-1),Ye=w("label",{for:"year"},"Rok",-1),Ee={class:"checkboxGroup"},Ze=w("label",{for:"useMonth"},"miesiąc",-1),qe={class:"checkboxGroup"},Xe=w("label",{for:"useDay"},"dzień",-1),es={class:"checkboxGroup"},ss=w("label",{for:"useHour"},"godzina",-1),ts={key:0,id:"result"},ns=w("h2",null,"Podano zły okres",-1),rs={key:1,id:"result"};m();const as=He(((e,s,t,n,r,a)=>(h(),y("div",Ke,[w("div",We,[Ue,w("form",Fe,[Qe,$(w("select",{id:"sensor","onUpdate:modelValue":s[1]||(s[1]=e=>r.sensorIndex=e),name:"sensor"},[(h(!0),y(_,null,A(t.sensorsNames,((e,s)=>(h(),y("option",{key:s,value:s},I(e),9,["value"])))),128))],512),[[T,r.sensorIndex]]),w("div",null,[Ye,$(w("input",{id:"year","onUpdate:modelValue":s[2]||(s[2]=e=>r.year=e),type:"number",name:"year",min:"2016",max:"2030"},null,512),[[L,r.year]])]),w("div",Ee,[$(w("input",{id:"useMonth","onUpdate:modelValue":s[3]||(s[3]=e=>r.useMonth=e),type:"checkbox",name:"useMonth"},null,512),[[V,r.useMonth]]),Ze,$(w("input",{id:"month","onUpdate:modelValue":s[4]||(s[4]=e=>r.month=e),type:"number",name:"month",min:"1",max:"12",disabled:!r.useMonth},null,8,["disabled"]),[[L,r.month]])]),w("div",qe,[$(w("input",{id:"useDay","onUpdate:modelValue":s[5]||(s[5]=e=>r.useDay=e),type:"checkbox",disabled:!r.useMonth},null,8,["disabled"]),[[V,r.useDay]]),Xe,$(w("input",{id:"day","onUpdate:modelValue":s[6]||(s[6]=e=>r.day=e),type:"number",name:"day",min:"1",max:"31",disabled:!r.useMonth||!r.useDay},null,8,["disabled"]),[[L,r.day]])]),w("div",es,[$(w("input",{id:"useHour","onUpdate:modelValue":s[7]||(s[7]=e=>r.useHour=e),type:"checkbox",disabled:!r.useMonth||!r.useDay},null,8,["disabled"]),[[V,r.useHour]]),ss,$(w("input",{id:"hour","onUpdate:modelValue":s[8]||(s[8]=e=>r.hour=e),type:"number",name:"hour",min:"0",max:"23",disabled:!r.useMonth||!r.useDay||!r.useHour},null,8,["disabled"]),[[L,r.hour]])]),w("input",{id:"archiveShowResult",type:"submit",value:"Wyświetl wyniki",onClick:s[9]||(s[9]=O(((...e)=>a.formSend&&a.formSend(...e)),["prevent"]))})]),r.JSONerror?(h(),y("div",ts,[ns])):S("",!0),r.isResponse&&!r.JSONerror?(h(),y("div",rs,[w("h2",null,'Wyniki dla czujnika "'+I(r.responseMax.sensorName)+'" za okres '+I(r.responsePeriod)+":",1),$(w("p",null," Najwyższy odczyt: "+I(r.responseMax.value)+I(r.responseMax.unit)+" ("+I(r.responseMax.date)+") ",513),[[M,r.windDirectionIndex!==r.sensorIndex]]),$(w("p",null," Najniższy odczyt: "+I(r.responseMin.value)+I(r.responseMin.unit)+" ("+I(r.responseMin.date)+") ",513),[[M,r.windDirectionIndex!==r.sensorIndex]]),$(w("p",null," Średni odczyt: "+I(r.responseAvg.value)+I(r.responseAvg.unit),513),[[M,r.windDirectionIndex!==r.sensorIndex]]),$(w("p",null," Suma: "+I(r.responseSum.value)+I(r.responseMax.unit),513),[[M,r.sensorIndex==r.rainIndex]]),$(w("p",null," Dominującym kierunkiem wiatru był: "+I(r.responseMax.value)+I(r.responseMax.unit),513),[[M,r.sensorIndex==r.windDirectionIndex]])])):S("",!0)])]))));Ge.render=as,Ge.__scopeId="data-v-71851c00";const os={name:"ArchivesMain",components:{ArchivesForm:Ge},props:{},data:()=>({sensorsNames:[],endpointNames:"http://meteo.wachcio.pl/API/GetJSON.php?getSensorName=all"}),computed:i({},d(["sensorsCurrent","isLoaded","showInfo","sensorActive"])),created(){0===this.sensorsNames.length&&P.get(this.endpointNames).then((e=>this.sensorsNames=e.data)).then(this.$store.commit("isLoadedChange",!0))},methods:i(i({},c(["updateSensorsCurrent","isLoadedChange"])),l(["getCurrentJSON"]))},is={class:"container"},us=w("h1",null,"Archiwum odczytów",-1);os.render=function(e,s,t,n,r,a){const o=z("ArchivesForm");return h(),y("div",is,[us,w(o,{"sensors-names":r.sensorsNames},null,8,["sensors-names"])])};let ds=null;const cs={name:"App",components:{Lightgallery:J},watch:{items(e,s){this.$nextTick((()=>{ds.refresh()}))}},data:()=>({plugins:[B],baseURL:"http://meteo.wachcio.pl/assets/slider/",items:[{id:"1",size:"1565-1024",src:"meteo01.png"},{id:"2",size:"1565-1024",src:"meteo02.png"},{id:"3",size:"1565-1024",src:"meteo03.png"},{id:"4",size:"1565-1024",src:"meteo04.png"},{id:"5",size:"1620-1080",src:"IMG_5905.JPG"},{id:"6",size:"1080-1620",src:"IMG_5925.JPG"},{id:"7",size:"1920-1044",src:"IMG_20180408_140523773.jpg"},{id:"8",size:"1920-1044",src:"IMG_20180407_161515269.jpg"},{id:"9",size:"1920-1044",src:"IMG_20180407_161528834.jpg"},{id:"10",size:"1080-1440",src:"IMG_20180408_112302544.jpg"}]}),methods:{onInit:e=>{ds=e.instance},onBeforeSlide:()=>{console.log("calling before slide")},addPatchToImg(e,s){let t="";return"slider"===e&&(t=`${this.baseURL}${s}`),"thumbnail"===e&&(t=`${this.baseURL}thumbnails/${s}`),t}}};cs.render=function(e,s,t,n,r,a){const o=z("lightgallery");return h(),y(o,{settings:{speed:500,plugins:e.plugins},onInit:a.onInit,onBeforeSlide:a.onBeforeSlide},{default:b((()=>[(h(!0),y(_,null,A(e.items,(e=>(h(),y("a",{key:e.id,"data-lg-size":e.size,className:"gallery-item","data-src":a.addPatchToImg("slider",e.src)},[w("img",{className:"img-responsive",src:a.addPatchToImg("thumbnail",e.src)},null,8,["src"])],8,["data-lg-size","data-src"])))),128))])),_:1},8,["settings","onInit","onBeforeSlide"])};const ls={components:{Gallery:cs},data:()=>({}),methods:{}},ps=v();p("data-v-c23fcb92");const ms={class:"wrapper"},hs=R('<h1 data-v-c23fcb92>Garść informacji o projekcie</h1><p data-v-c23fcb92></p><p data-v-c23fcb92> System zbierania danych z kilkudziesięciu czujników. Zaczął powstawać w maju 2016 roku. Strona typu SPA powstaje od grudnia 2018 przy pomocy framework-a Vue. W maju 2021 rozpocząłem migrację z Vue2 do Vue3. </p><p data-v-c23fcb92> Od jakiegoś czasu działał u mnie minikomputer Raspberry Pi z zainstalowanym Raspianem oraz systemem monitoringu temperatury (i nie tylko) <a href="https://techfreak.pl/nettemp/" target="_blank" data-v-c23fcb92>Nettemp</a> autorstwa techfreak. Mierzy on temperatury w kotłowni i na zewnątrz budynku za pomocą czujników DS18B20 oraz DHT22 (bardzo słabe i zawodne). </p><p data-v-c23fcb92> Po kilku miesiącach zacząłem myśleć nad własną stacją pogody która mogła by oprócz temperatur mierzyłć również inne parametry i co najważniejsze była mojego autorstwa. Dzięki pomocy ze strony forum <a href="https://forum.atnel.pl/portal.php" target="_blank" data-v-c23fcb92>Atnel</a> oraz kanałowi YouTube <a href="https://www.youtube.com/channel/UC9helAwUtau_y4qyTcSR4Tg" target="_blank" data-v-c23fcb92>Atnel - mirekk36</a> zaprojektowałem a następnie polutowałem urządzenie i zaprogramowałem w języku C mikrokontroler Atmega 32A który jest `sercem` stacji meteo. Stacja zbiera informacje z czujników: temperatury (DS18B20, BMP180, SHT21), wilgotności (SHT21), ciśnienia (BMP180), wiatru, opadów oraz nasłonecznienia (BH1750). 9 lutego 2020 zamieniłem czujnki SHT21 i BMP 180 na jeden BME280 który mierzy temperaturę, ciśnienie i wilgotność. </p><p data-v-c23fcb92> Zachęcony udaną budową stacji złożyłem projekt firmy <a href="https://www.atnel.pl/" target="_blank" data-v-c23fcb92>Atnel</a> opisany w żółtej książce Mirosława Kardasia czyli zegar w dwóch sztukach. Po modyfikacjach oprogramowania zegary znajdujące się w salonie oraz sypialni wysyłają dane do Raspberry Pi który zapisuje je w zewnętrznej bazie danych. </p><p data-v-c23fcb92> Kolejną małą częścią projektu stało się urządzenie oparte o znany moduł wi-fi ESP8266 do którego podłączyłem czujnik temperatury DS18B20 w hermetcznej obudowie i umieściłem w akwarium. On również wysyła swoje dane do Nettemp-a. </p><p data-v-c23fcb92> Ostatnim elementem `układanki` jest odpytywanie bazy danych <a href="https://airly.eu/pl/" target="_blank" data-v-c23fcb92>Airly</a> o dane z czujników jakości powietrza znajdującego się w mojej miejscowości (od maja 2021 dostępne są dwa czujniki). </p><p data-v-c23fcb92> Dane z wszystkich moich części systemu trafiają co minutę (dane jakości powietrza ze względu na ograniczenia AirlyAPI odczytywane są co kwadrans) do bazy danych MySQL umieszczonej na zewnętrznym serwerze. Odbywa się to za pośrednictwem napisanych przeze mnie skryptów PHP. Dopiero z tej bazy poprzez mój mini system Rest API czerpie informacje ta strona. Jeśli jest problem z danym czujnikiem i z jakiegoś powodu dane są starsze niż 5 minut (16 minut czujniki jakości powietrza) sygnalizowane to jest czerwoną obwódką wokół ikony czujnika. Po kliknięciu na czujnik pokazują się bardziej szczegółowe informacje. Natomist kliknięcie na tytuł kategorii powoduje jej ukrycie lub pokazanie. </p><p data-v-c23fcb92> W zakładce `Odczyty archiwalne` można uzyskać podstawowe dane statystyczne (odczyt maksymalny, minimalny, średni i w niektórych wypadkach sumę) z czujników w danym przedziale czasowym: rok, miesiąc, dzień i godzina </p>',10),ys={class:"sliderContainer"},ws={class:"sliderWrapper"};m();const vs=ps(((e,s,t,n,r,a)=>{const o=z("Gallery");return h(),y("div",ms,[hs,w("div",ys,[w("div",ws,[w(o)])])])}));ls.render=vs,ls.__scopeId="data-v-c23fcb92";const gs=[{path:"/",redirect:"/current"},{path:"/current",component:Me},{path:"/archive",component:os},{path:"/about",component:ls}],zs=G({history:H(),routes:gs});var fs=K({state:{endpoints:{endpointCurrent:"http://meteo.wachcio.pl/API/GetJSON.php?data=current",endpointNames:"http://meteo.wachcio.pl/API/GetJSON.php?getSensorName=all"},sensorsCurrent:[],loadingData:!1,isLoaded:!1,showInfo:!1,currentDate:void 0,sensorActive:void 0,WindSpeedIndex:void 0},getters:{},mutations:{updateSensorsCurrent(e,s){e.sensorsCurrent=s;const t=W.findIndex(e.sensorsCurrent,{sensorName:"Prędkość wiatru km/h"}),n=W.findIndex(e.sensorsCurrent,{sensorName:"Kierunek wiatru"});0===e.sensorsCurrent[t].valueCurrent.value&&(e.sensorsCurrent[n].valueCurrent.value="bezwietrznie",e.sensorsCurrent[n].picture="assets/strzalka_przezroczysta.png"),e.isLoaded=!0},isLoadedChange(e,s){e.isLoaded=s},loadingData(e,s){e.loadingData=s},timer(e,s){e.currentDate=s},showInfo(e,s){e.showInfo=s},sensorActive(e,s){e.sensorActive=s},changeWindSpeedIndex(e,s){e.WindSpeedIndex=s}},actions:{getCurrentJSON(e){1!=this.state.loadingData&&(e.commit("loadingData",!0),e.commit("isLoadedChange",!1),P.get(e.state.endpoints.endpointCurrent).then((s=>e.commit("updateSensorsCurrent",s.data))).then((s=>e.commit("loadingData",!1))))}}});U(ue).use(zs).use(fs).mount("#app");
